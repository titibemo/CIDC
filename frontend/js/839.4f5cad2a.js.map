{"version":3,"file":"js/839.4f5cad2a.js","mappings":"2RAmEA,MAAMA,GAAO,SAAS,IAAMC,EAAA,EAAMC,MAAMF,MAAQ,CAAC,IAE3CG,GAAQ,QAAI,IACZC,GAAY,QAAI,IAChBC,GAAW,QAAI,IAKfC,IAJY,QAAI,KACF,QAAI,KACD,QAAI,KACP,QAAI,KACP,QAAI,KACfC,GAAY,QAAI,IAKhBC,EAAS,KAGPF,EAASG,MAAMC,OAAS,GAAKP,EAAMM,MAAMC,OAAS,GAClDN,EAAUK,MAAMC,OAAS,GAAKL,EAASI,MAAMC,OAAS,GACtDJ,EAASG,QAAUF,EAAUE,MAC7BE,IAEAC,MAAM,0CACV,EAMED,EAAcE,UAChB,MAAMC,EAAO,CAETX,MAAOA,EAAMM,MACbL,UAAWA,EAAUK,MACrBJ,SAAUA,EAASI,MACnBM,UAAWf,EAAKS,MAAMM,UACtBT,SAAUA,EAASG,OAGvB,IACI,MAAMO,QAAiBC,MAAM,+CAA0DjB,EAAKS,MAAMS,KAAM,CACpGC,OAAQ,OACRC,KAAMC,KAAKC,UAAUR,GACrBS,QAAS,CACL,OAAU,oCACV,eAAgB,sBAKxB,IAAKP,EAASQ,GACV,MAAM,IAAIC,MAAM,uBAAuBT,EAASU,UAGpD,MAAMC,QAAeX,EAASY,OAC9BC,EAAA,EAAOC,KAAK,cACZC,QAAQC,IAAI,8BAA+BL,EAE/C,CAAE,MAAOM,GACLF,QAAQG,MAAM,mCAAoCD,EACtD,G,i9DC1HJ,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://yoome-front/./src/views/users/modifierUserProfil.vue","webpack://yoome-front/./src/views/users/modifierUserProfil.vue?9210"],"sourcesContent":["<template>\r\n    <div class=\"bodyRegister\">\r\n\r\n        <h3>Modifier mon profil</h3>\r\n        <form @submit.prevent=\"verify\" class=\"bodypage\">\r\n\r\n            <h4> INFORMATION PERSONNELLES</h4>\r\n            <p>Nom d'utilisateur :</p>\r\n            <input type=\"text\" placeholder=\"Modifier le nom d’utilisateur\" v-model=\"lastname\" required />\r\n\r\n\r\n            <p>Prenom d'utilisateur : </p>\r\n            <input type=\"text\" placeholder=\"Modifier le prenom d’utilisateur\" v-model=\"firstname\" required />\r\n\r\n\r\n            <p>Adresse mail :</p>\r\n            <input type=\"email\" placeholder=\"Modifier l’adresse email\" v-model=\"email\" required />\r\n\r\n            <div class=\"ligne\"></div>\r\n            <!-- \r\n            <h4> DESCRIPTION</h4>\r\n\r\n            <p>À propos de moi : </p>\r\n            <textarea placeholder=\"Parlez un peu de vous...\" name=\"\"  v-model=\"description\" rows=\"5\"  id=\"\"></textarea>\r\n\r\n            <div class=\"ligne\"></div>\r\n\r\n            <h4> PREFERENCE DE RENCONTRE</h4>\r\n\r\n            <p class=\"nomInput2\">GENRE RECHERCHÉ</p>\r\n            <div class=\"paddNone\">\r\n               \r\n                <select name=\"sexe\" id=\"\" v-model=\"genreRecherche\" required>\r\n                    <option value=\"\"></option>\r\n                    <option value=\"homme\">Homme</option>\r\n                    <option value=\"femme\">Femme</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div class=\"ligne\"></div> -->\r\n\r\n            <h4> MOT DE PASSE</h4>\r\n            <p class=\"\">Modifier le mot de passe :</p>\r\n\r\n            <div>\r\n                <input type=\"password\" placeholder=\" Nouveau mot de passe\" v-model=\"password\" required />\r\n            </div>\r\n            <div>\r\n                <input type=\"password\" placeholder=\"Confirmer le nouveau mot de passe\" v-model=\"password2\" required />\r\n            </div>\r\n\r\n\r\n            <button type=\"submit\">Sauvegarder</button>\r\n        </form>\r\n        <div class=\"ligne\"></div>\r\n        <button type=\"\" @click=\"delete\">supprimer mon compte </button>\r\n        <h4>Cette action est définitive. <br> Votre profil, ainsi que toutes vos données, <br> seront supprimés de façon\r\n            irréversible.</h4>\r\n        <div class=\"ligne\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport router from '@/router';\r\nimport { computed, ref } from 'vue';\r\nimport store from '@/store';\r\n\r\nconst user = computed(() => store.state.user || {});\r\n\r\nconst email = ref('');\r\nconst firstname = ref('');\r\nconst lastname = ref('');\r\nconst birthdate = ref('');\r\nconst description = ref('')\r\nconst genreRecherche = ref('')\r\nconst oldpassword = ref('');\r\nconst password = ref('');\r\nconst password2 = ref('');\r\n\r\n\r\n\r\n\r\nconst verify = () => {\r\n\r\n\r\n    if (password.value.length > 0 && email.value.length > 0 &&\r\n        firstname.value.length > 0 && lastname.value.length > 0 &&\r\n        password.value === password2.value) {\r\n        fetchModify(); // Appelle la fonction pour modifier les informations de l'utilisateur\r\n    } else {\r\n        alert(\"Les mots de passe ne correspondent pas.\");\r\n    }\r\n\r\n};\r\n\r\n\r\n\r\nconst fetchModify = async () => {\r\n    const data = {\r\n       \r\n        email: email.value,\r\n        firstname: firstname.value,\r\n        lastname: lastname.value,\r\n        birthdate: user.value.birthdate,\r\n        password: password.value\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(`${process.env.VUE_APP_IP_ADDRESS}/api/users/modifyUser/${user.value.id}`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n            headers: {\r\n                'Accept': 'application/json, text/plain, */*',\r\n                'Content-Type': 'application/json',\r\n            },\r\n        });\r\n\r\n        // Vérifie si le statut de la réponse indique une erreur\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n        router.push('/monProfil')\r\n        console.log('Profil modifié avec succès:', result); // Traiter le retour si nécessaire\r\n\r\n    } catch (err) {\r\n        console.error('Error during fetch modifier user', err);\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/style/variablecouleur.scss\";\r\n\r\n.bodyRegister {\r\n    background-color: whitesmoke;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n}\r\n\r\nh3 {\r\n    color: $primary;\r\n    padding: 30px;\r\n}\r\n\r\nh4 {\r\n    padding-bottom: 10px;\r\n}\r\n\r\np {\r\n\r\n    text-align: left;\r\n}\r\n\r\ninput,\r\nselect,\r\ntextarea {\r\n    border: 0;\r\n    padding: 5px;\r\n    width: 100%;\r\n    margin: 10px 0;\r\n    border-radius: 5px;\r\n    background-color: rgba(227, 227, 227, 1)\r\n}\r\n\r\n.ligne {\r\n    height: 1px;\r\n    width: 80%;\r\n    background-color: $primary;\r\n    margin: 20px;\r\n}\r\n\r\nbutton {\r\n    height: 10px;\r\n    border-radius: 5px;\r\n\r\n}\r\n</style>","import script from \"./modifierUserProfil.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./modifierUserProfil.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./modifierUserProfil.vue?vue&type=style&index=0&id=0d9d9354&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0d9d9354\"]])\n\nexport default __exports__"],"names":["user","store","state","email","firstname","lastname","password","password2","verify","value","length","fetchModify","alert","async","data","birthdate","response","fetch","id","method","body","JSON","stringify","headers","ok","Error","status","result","json","router","push","console","log","err","error","__exports__"],"sourceRoot":""}